## Bitrix Version Builder

Библиотека берёт на себя рутинную работу по сборке **обновлений модулей** 1С-Битрикс:
- автоматическое создание архива новой версии модуля;
- определение изменённых файлов по истории коммитов в git;
- автоматическое декодирование кириллических языковых файлов из UTF-8 в windows-1251;
- автоматическое описание обновления (description. ru) из комментария последнего коммита.

## Установка и использование
В корне модуля (там где у вас /install, /lang, /include.php, ...) выполните команду:
```sh
composer require denx-b/bitrix-version-builder --dev
```

Теперь для создания архива достаточно вызвать:
```sh
./vendor/bin/bversionbuilder
```

И в вашей структуре появится директория /.versions, с архивами обновлений:
```php
/*
aspro.max/
  ├─ .versions/
  |   ├─ 1.1.3.zip
  |   ├─ 1.1.4.zip
  ├─ install/
  ├─ lang/
  ├─ vendor/
  └─ include.php
*/
```

### Как это работает?
В корне вашего модуля сборщик создаст директорию /.versions, в которую и будут складываться архивы версий 1.1.3.zip, 1.1.4.zip и так далее.

Название версии берётся из файла модуля /install/version.php

    <?php
    $arModuleVersion = array(  
        "VERSION" => "1.1.4",  
        "VERSION_DATE" => "2019-12-04 18:52:00"  
    );
В истории коммитов git обязательно должны быть теги, в архив попадут все изменённые файлы именно между последним и предыдущим тегами.
![](https://dbogdanoff.ru/upload/bitrix-version-builder-1010.jpeg)

Развивайте ваш модуль, комитьте, фокусируйтесь на задаче, а рутинную работу возложите на сборщик! Как будете готовы к публикации новой версии, сново просто выполните команду `./vendor/bin/bversionbuilder`
